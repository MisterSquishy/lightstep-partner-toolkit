<html>
  <head>
    <title>Split.io + Lightstep + OpenTelemetry</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mini.css/3.0.1/mini-default.min.css"/>
    <script>
      async function getDonuts(url = "/api/donuts") {
        document.getElementById("spinner").className = "spinner";
        document.getElementById("donuts-button").className = "hidden";
        const response = await fetch(url, {
          method: "GET",
          headers: {
            "Content-Type": "application/json"
          }
        });
        document.getElementById("spinner").className = "spinner hidden";
        document.getElementById("donuts-button").className = "";
        const json = await response.json();
        document.getElementById('order-details').innerText = json.donuts[0].type;
        document.getElementById("donuts-button").innerText = "üç© Order Donuts (again?!)"
      }
    </script>
  </head>
  <body>
    <div>
      <h1>Split.io + Lightstep + OpenTelemetry!</h1>
      <p>This example Node.js express app generates traces annoated with Split.io feature flags using OpenTelemetry every time you click the 'Order Donuts' button.</p>
      <p>Telemetry data is configured to be sent to Lightstep.</p>
      <div>
        <div id="spinner" class="spinner hidden"></div>
        <button id="donuts-button" onclick=getDonuts()>üç© Order Donuts</button>
      </div>
      <div>
        <p>Your order: <span id="order-details"></span></p>
      </div>
    </div>
  </body>
</html>
